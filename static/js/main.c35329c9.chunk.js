(this["webpackJsonpcharacter-sheet"]=this["webpackJsonpcharacter-sheet"]||[]).push([[0],{104:function(e,a,t){e.exports=t(205)},109:function(e,a,t){},110:function(e,a,t){},205:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(9),c=t.n(r),i=(t(109),t(12)),o=t(246),u=(t(110),t(15)),s=t(32),m=t.n(s),d=t(37),f=t.n(d),y=t(93),v=t.n(y);function g(e){return e>0?"+"+e:e.toString()}function h(e){return Math.floor((e-10)/2)}var p=function(e){return void 0!==e&&e.length>0},E={name:"My Character",abilities:{strength:{score:10,modifier:0,effects:[]},dexterity:{score:10,modifier:0,effects:[]},constitution:{score:10,modifier:0,effects:[]},intelligence:{score:10,modifier:0,effects:[]},wisdom:{score:10,modifier:0,effects:[]},charisma:{score:10,modifier:0,effects:[]}},baseAttackBonus:0,weapons:[]},b={activeCharacterIndex:0,characters:[E]},C=function(e,a){var t,n,l=a.type,r=a.payload;switch(l){case"on_input":return f()(Object(u.a)({},e),r.key,r.value);case"add_item":return(t=m()(Object(u.a)({},e),"".concat(r.key),[])).push(r.value),f()(Object(u.a)({},e),"".concat(r.key),t);case"delete_item":return t=m()(Object(u.a)({},e),"".concat(r.key),[]),v()(t,(function(e,a){return a===r.value})),f()(Object(u.a)({},e),"".concat(r.key),t);case"save_data":return localStorage.setItem("state",JSON.stringify(e)),e;case"import_data":return null===r?b:Object(u.a)({},e,{},r,{edit:!1});case"set_ability_score":return function(e,a,t,n){var l=m()(Object(u.a)({},e),a),r=l.score,c=l.effects;null===t&&(t=r),n&&c.push(n);var i=c?parseInt(t)+c.reduce((function(e,a){return e+parseInt(a.value)}),0):parseInt(t);return f()(Object(u.a)({},e),a,{score:t,modifier:h(i),effects:c})}(e,r.key,r.value);case"edit_skill":return(n=m()(Object(u.a)({},e),"skills",[]))[r.key].ranks=r.value,f()(Object(u.a)({},e),"skills",n);default:return e}},k=Object(n.createContext)(b),x=k.Provider,j=function(e){var a=e.children,t=Object(n.useReducer)(C,b),r=Object(i.a)(t,2),c=r[0],o=r[1];return l.a.createElement(x,{value:{state:c,dispatch:o}},a)},O=(k.Consumer,k),A=t(253),w=t(242),B=t(238),_=t(57),D=t.n(_),I=t(96),S=t.n(I);function W(e){var a=e.base,t=e.edit,n=e.effects,r=e.name,c=e.modifier,o=e.setAbilityScore,u=l.a.useState(null),s=Object(i.a)(u,2),m=s[0],d=s[1],f=function(e){t||d(e.currentTarget)},y=Boolean(m);return l.a.createElement(l.a.Fragment,null,t?l.a.createElement("div",{className:"stat",onClick:f,style:{display:"flex",flexDirection:"column"}},l.a.createElement("header",{style:{textAlign:"center",textTransform:"capitalize"}},r),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(B.a,{onClick:function(){a>0&&o(a-1)},size:"small"},l.a.createElement(S.a,null)),l.a.createElement("div",{style:{fontWeight:"bold",textAlign:"center"}},a),l.a.createElement(B.a,{onClick:function(){o(a+1)},size:"small"},l.a.createElement(D.a,null)))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"stat",onClick:f},l.a.createElement("div",null,l.a.createElement("header",{style:{textAlign:"center",textTransform:"capitalize"}},r),l.a.createElement("div",{style:{fontWeight:"bold",textAlign:"center"}},t?a:g(c)))),l.a.createElement(A.a,{open:y,anchorEl:m,onClose:function(){d(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},disableRestoreFocus:!0},l.a.createElement("div",{style:{padding:"1rem"}},l.a.createElement("div",{key:"base",style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(w.a,null,"Base"),l.a.createElement(w.a,{style:{marginLeft:"1rem"}},a)),n.length>0?l.a.createElement(l.a.Fragment,null,n.map((function(e){return l.a.createElement("div",{key:e.source,style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(w.a,null,e.source),l.a.createElement(w.a,{style:{marginLeft:"1rem"}},g(parseInt(e.value))))}))):null))))}var N=t(30),T=t.n(N),z=function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),r=t[0],c=t[1],o=Object(n.useContext)(O),u=o.state,s=o.dispatch,m=u.activeCharacterIndex,d=u.characters[m].abilities,f=function(e){return l.a.createElement(W,{edit:r,effects:d[e].effects,name:e,base:d[e].score,modifier:d[e].modifier,setAbilityScore:function(a){return function(e,a){s({type:"set_ability_score",payload:{key:"characters[".concat(m,"].").concat(e),value:a}}),s({type:"save_data"})}("abilities.".concat(e),a)}})};return l.a.createElement("section",null,l.a.createElement("header",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"}},l.a.createElement("h1",null,"Ability Scores"),l.a.createElement(B.a,{onClick:function(){c(!r)}},l.a.createElement(T.a,null))),l.a.createElement("div",{style:{display:"flex"}},f("strength"),f("dexterity"),f("constitution"),f("intelligence"),f("wisdom"),f("charisma")))},R=t(249);function F(e){var a=e.handleChange,t=Object(n.useState)(!1),r=Object(i.a)(t,2),c=r[0],o=r[1],u=Object(n.useContext)(O).state,s=u.activeCharacterIndex,m=u.characters[s],d=m.name,f=m.baseAttackBonus;return l.a.createElement("section",{className:"character"},l.a.createElement("header",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"}},!c&&l.a.createElement("h1",null,d),c&&l.a.createElement(R.a,{label:"Name",onChange:function(e){return a("name",e.target.value)},style:{fontWeight:"bold"},value:d}),l.a.createElement(B.a,{onClick:function(){return o(!c)}},l.a.createElement(T.a,null))),c&&l.a.createElement(R.a,{label:"Base Attack Bonus",onChange:function(e){return a("baseAttackBonus",parseInt(e.target.value))},type:"number",value:f}))}var L=t(243),J=t(97),M=t.n(J),V=function(e){var a=e.bonus,t=e.handleChange,r=e.identifier,c=e.index,i=Object(n.useContext)(O),o=i.dispatch,u=i.state.activeCharacterIndex;return l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(R.a,{label:"Source",onChange:function(e){return t("".concat(r,"[").concat(c,"].source"),e.target.value)},value:a.source}),l.a.createElement(R.a,{label:"Value",onChange:function(e){return t("".concat(r,"[").concat(c,"].value"),parseInt(e.target.value))},type:"number",value:a.value}),l.a.createElement(B.a,{onClick:function(){o({type:"delete_item",payload:{key:"characters[".concat(u,"].").concat(r),value:c}}),o({type:"save_data"})}},l.a.createElement(M.a,null)))},P=t(254),$=["Strength","Dexterity","Constitution","Intelligence","Wisdom","Charisma"],q=["1","1d2","1d3","1d4","1d6","1d8","1d10","1d12","2d6","2d8","3d6","3d8","4d6"],G=function(e){var a=e.identifier,t=e.index,r=e.handleChange,c=e.weapon,i=Object(n.useContext)(O),o=i.dispatch,u=i.state.activeCharacterIndex,s={source:"",value:0},m=function(e){o({type:"add_item",payload:{key:"characters[".concat(u,"].").concat(e),value:s}}),o({type:"save_data"})};return l.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr"}},l.a.createElement("div",{style:{margin:"1rem"}},l.a.createElement(R.a,{fullWidth:!0,label:"Attack Ability",select:!0,onChange:function(e){return r("".concat(a,".attackAbility"),e.target.value)},value:c.attackAbility},$.map((function(e){return l.a.createElement(P.a,{key:e,value:e},e)}))),l.a.createElement("h5",null,"Attack Bonuses"),c.attackBonus.map((function(e,t){return l.a.createElement(V,{bonus:e,handleChange:r,identifier:"".concat(a,".attackBonus"),index:t})})),l.a.createElement(L.a,{onClick:function(){return m("".concat(a,".attackBonus"))},style:{marginTop:"1rem"},variant:"contained"},"Add Bonus")),l.a.createElement("div",{style:{margin:"1rem"}},l.a.createElement(R.a,{fullWidth:!0,label:"Damage Die",select:!0,onChange:function(e){return r("".concat(a,".damageDie"),e.target.value)},value:c.damageDie},q.map((function(e){return l.a.createElement(P.a,{key:e,value:e},e)}))),l.a.createElement(R.a,{fullWidth:!0,label:"Damage Ability",select:!0,onChange:function(e){return r("".concat(a,".damageAbility"),e.target.value)},value:c.damageAbility},$.map((function(e){return l.a.createElement(P.a,{key:e,value:e},e)}))),l.a.createElement(R.a,{fullWidth:!0,label:"Extra Damage Name",onChange:function(e){return r("".concat(a,".extraDamage.name"),e.target.value)},value:c.extraDamage.name}),l.a.createElement(R.a,{fullWidth:!0,label:"Extra Damage Value",onChange:function(e){return r("".concat(a,".extraDamage.value"),e.target.value)},value:c.extraDamage.value}),l.a.createElement("h5",null,"Damage Bonuses"),c.damageBonus.map((function(e,t){return l.a.createElement(V,{bonus:e,handleChange:r,identifier:"".concat(a,".damageBonus"),index:t})})),l.a.createElement(L.a,{onClick:function(){return m("".concat(a,".damageBonus"))},style:{marginTop:"1rem"},variant:"contained"},"Add Bonus")),l.a.createElement(L.a,{color:"secondary",onClick:function(){o({type:"delete_item",payload:{key:"characters[".concat(u,"].weapons"),value:t}}),o({type:"save_data"})},style:{gridColumn:2,justifySelf:"flex-end"},variant:"contained"},"Delete"))},H=function(e){var a=e.label,t=e.value,n=e.modifiers,r=l.a.useState(null),c=Object(i.a)(r,2),o=c[0],u=c[1],s=Boolean(o);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"stat",onClick:function(e){u(e.currentTarget)}},l.a.createElement("div",null,l.a.createElement("header",{style:{textAlign:"center"}},a),l.a.createElement("div",{style:{fontWeight:"bold",textAlign:"center"}},t))),p(n)?l.a.createElement(A.a,{open:s,anchorEl:o,onClose:function(){u(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l.a.createElement("div",{style:{padding:"1rem"}},p(n)?l.a.createElement(l.a.Fragment,null,n.map((function(e){return l.a.createElement("div",{key:e.label,style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(w.a,null,e.source),l.a.createElement(w.a,{style:{marginLeft:"1rem"}},g(e.value)))}))):null)):null)},K=function(e,a){var t=0;return e.value>a.value?t=-1:e.value<a.value&&(t=1),t};function Q(e){var a=e.label,t=e.modifiers,n=t.reduce((function(e,a){return e+(a.value||0)}),0);return l.a.createElement(H,{label:a,value:g(n),modifiers:t.sort(K)})}var U=function(e){var a=Object(n.useContext)(O),t=a.state,r=(a.dispatch,t.characters[t.activeCharacterIndex]),c=r.abilities,i=r.baseAttackBonus,o=e.index,u=e.handleChange,s=e.weapon,m="weapons[".concat(o,"]");return l.a.createElement("div",{style:{border:"1px solid lightgray",padding:"1rem",marginBottom:"1rem"}},l.a.createElement("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"}},l.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"50%"}},s.edit?l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{label:"Weapon Name",onChange:function(e){return u("".concat(m,".name"),e.target.value)},style:{fontWeight:"bold"},value:s.name}),l.a.createElement(R.a,{label:"Critical Range",placeholder:"x2",onChange:function(e){return u("".concat(m,".criticalRange"),e.target.value)},value:s.criticalRange})):l.a.createElement(l.a.Fragment,null,l.a.createElement("strong",null,s.name),s.criticalRange&&l.a.createElement("em",{style:{fontSize:"12px"}},"Critical Range: ",s.criticalRange))),l.a.createElement(B.a,{onClick:function(e){return u("".concat(m,".edit"),!s.edit)}},l.a.createElement(T.a,null))),l.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",marginTop:"1rem"}},l.a.createElement(Q,{label:"Attack Bonus",modifiers:[{source:"Base Attack Bonus",value:i},{source:s.attackAbility,value:c[s.attackAbility.toLowerCase()].modifier}].concat(s.attackBonus)}),l.a.createElement(H,{label:"Damage Die",value:s.damageDie}),l.a.createElement(Q,{label:"Damage Bonus",modifiers:[{source:s.damageAbility,value:c[s.damageAbility.toLowerCase()].modifier}].concat(s.damageBonus)}),s.extraDamage.name&&l.a.createElement(H,{label:s.extraDamage.name,value:s.extraDamage.value})),s.edit&&l.a.createElement(G,{index:o,handleChange:u,identifier:m,weapon:s}))},X=function(e){var a=e.handleChange,t=Object(n.useContext)(O),r=t.state,c=t.dispatch,i=r.activeCharacterIndex,o=r.characters[i].weapons,u={name:"New Weapon",attackBonus:[],criticalRange:"",damageBonus:[],damageDie:"1d4",extraDamage:{name:"",value:""},attackAbility:"Strength",damageAbility:"Strength",edit:!1};return l.a.createElement("section",null,l.a.createElement("h2",null,"Weapons"),o.map((function(e,t){return l.a.createElement(U,{index:t,handleChange:a,weapon:e})})),l.a.createElement(L.a,{onClick:function(){c({type:"add_item",payload:{key:"characters[".concat(i,"].weapons"),value:u}}),c({type:"save_data"})}},"Add Weapon"))},Y=t(252),Z=t(245),ee=t(244),ae=function(){var e=Object(n.useContext)(O),a=e.dispatch,t=e.state,r=t.activeCharacterIndex,c=t.characters[r].name,o=Object(n.useState)(!1),u=Object(i.a)(o,2),s=u[0],m=u[1],d=function(){m(!1)},f=function(e,t){a({type:"on_input",payload:{key:"characters[".concat(r,"].").concat(e),value:t}}),a({type:"save_data"})};return l.a.createElement("main",{style:{display:"flex",flexDirection:"column",marginTop:"4rem"}},l.a.createElement(F,{handleChange:f}),l.a.createElement(z,null),l.a.createElement(X,{handleChange:f}),l.a.createElement(L.a,{onClick:function(){m(!0)},style:{marginLeft:"auto"}},"Delete Character"),l.a.createElement(Y.a,{fullWidth:!0,maxWidth:"sm",open:s,onClose:d},l.a.createElement(ee.a,null,"Are you sure you want to delete ",c,"?"),l.a.createElement(Z.a,null,l.a.createElement(L.a,{onClick:d},"Cancel"),l.a.createElement(L.a,{color:"secondary",onClick:function(){d(),a({type:"on_input",payload:{key:"activeCharacterIndex",value:0}}),a({type:"delete_item",payload:{key:"characters",value:r}}),a({type:"save_data"})},variant:"contained"},"Delete ",c))))},te=t(247),ne=t(250),le=t(248),re=function(){var e=Object(n.useContext)(O),a=e.state,t=e.dispatch,r=a.characters,c=Object(n.useState)(0),u=Object(i.a)(c,2),s=u[0],m=u[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("state"));t({type:"import_data",payload:e})}),[t]);return l.a.createElement(o.a,{className:"App"},l.a.createElement(te.a,{color:"default"},l.a.createElement(ne.a,{value:s},r.map((function(e,a){return l.a.createElement(le.a,{label:e.name,onClick:function(){return function(e){m(e),t({type:"on_input",payload:{key:"activeCharacterIndex",value:e}}),t({type:"save_data"})}(a)}})})),l.a.createElement(B.a,{onClick:function(){t({type:"add_item",payload:{key:"characters",value:E}}),t({type:"save_data"})}},l.a.createElement(D.a,null)))),l.a.createElement(ae,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(j,null,l.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[104,1,2]]]);
//# sourceMappingURL=main.c35329c9.chunk.js.map